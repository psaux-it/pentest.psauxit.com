#!/bin/bash
# Helper dig script

if [[ $# -eq 1 ]]; then
  dig $1 any
elif [[ $2 == DMARC ]]; then
  dig TXT _dmarc.$3 | grep -v -e "^$\|^;"
elif [[ $2 == SPF ]]; then
  dig TXT $3 | grep -v -e "^$\|^;" | grep spf
elif [[ $2 == MX ]]; then
  dig MX $3 | grep -v -e "^$\|^;"
elif [[ $2 == NS ]]; then
  dig NS $3 | grep -v -e "^$\|^;"
elif [[ $2 == A ]]; then
  dig A $3 | grep -v -e "^$\|^;"
elif [[ $2 == REVERSE ]]; then
  dig -x $(dig A $3 | grep -v -e "^$\|^;" | awk '{print $NF}') | grep -v -e "^$\|^;" | awk '{print $5}' | sed 's/.$//'
fi
