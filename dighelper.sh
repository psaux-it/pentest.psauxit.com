#!/bin/bash
# Helper dig script

if [[ $# -eq 2 ]]; then
  dig $1 any
elif [[ $2 == dmarc ]]; then
  dig TXT _dmarc.$3 | grep -v -e "^$\|^;"
elif [[ $2 == spf ]]; then
  dig TXT $3 | grep -v -e "^$\|^;" | grep spf
elif [[ $2 == mx ]]; then
  dig MX $3 | grep -v -e "^$\|^;"
elif [[ $2 == ns ]]; then
  dig NS $3 | grep -v -e "^$\|^;"
elif [[ $2 == aaa ]]; then
  dig A $3 | grep -v -e "^$\|^;"
elif [[ $2 == reverse ]]; then
  dig -x $(dig A $3 | grep -v -e "^$\|^;" | awk '{print $NF}') | grep -v -e "^$\|^;" | awk '{print $5}' | sed 's/.$//'
fi
